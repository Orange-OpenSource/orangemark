<!DOCTYPE html>
<html>
  <head>
    <title>Frame [linear-gradient]</title>
    <link rel="stylesheet" type="text/css" href="../uiperftest.css">
    <link rel="stylesheet" type="text/css" href="../resources/testharness.css">
    <script type="text/javascript" src="../resources/fpsmeter.js"></script>
    <script type="text/javascript" src="../resources/testharness.js"></script>
    <script type="text/javascript" src="../resources/testharnessreport.js"></script>
    <script type="text/javascript" src="../resources/modernizr.js"></script>
    <script type="text/javascript" src="../uiperftest.js"></script>
    <script type="text/javascript" src="./animatedframestest.js"></script>

    <script type="text/javascript">
      
      var timer;
      
      function startAnimation(index){
		  //alert('prefixed(linearGradient) = ' + Modernizr.prefixed('transform'));
		  //alert('convertCamelCaseToCssAttrib = ' + convertCamelCaseToCssAttrib(Modernizr.prefixed('transform')));
        for(var i=0; i<Math.pow(2, index-1); i++) 
		{
		  AnimatedFramesTest.addColoredFrame();
          AnimatedFramesTest.frames[i].style['backgroundImage'] = '-o-linear-gradient(top, ' + 
			'rgba(' + Math.round(Math.random()*255)+','+Math.round(Math.random()*255)+','+Math.round(Math.random()*255)+',0.5), ' +
			'rgba(' + Math.round(Math.random()*255)+','+Math.round(Math.random()*255)+','+Math.round(Math.random()*255)+',0.5) )';
		  
          AnimatedFramesTest.frames[i].style['backgroundImage'] = '-webkit-linear-gradient(top, ' + 
			'rgba(' + Math.round(Math.random()*255)+','+Math.round(Math.random()*255)+','+Math.round(Math.random()*255)+',0.5), ' +
			'rgba(' + Math.round(Math.random()*255)+','+Math.round(Math.random()*255)+','+Math.round(Math.random()*255)+',0.5) )';
		  
          AnimatedFramesTest.frames[i].style['backgroundImage'] = '-moz-linear-gradient(top, ' + 
			'rgba(' + Math.round(Math.random()*255)+','+Math.round(Math.random()*255)+','+Math.round(Math.random()*255)+',0.5), ' +
			'rgba(' + Math.round(Math.random()*255)+','+Math.round(Math.random()*255)+','+Math.round(Math.random()*255)+',0.5) )';
		}
		
		setTimeout(function() {
                updateFrames();
                timer = setInterval(updateFrames,1000);
            },
            10);
      }
      
      function updateFrames () {
        var frames= AnimatedFramesTest.frames;
        for (var i=0, l= frames.length; i< l; i++){
          //AnimatedFramesTest.randomPositionFrame(frames[i]);
          frames[i].style['backgroundImage'] = '-o-linear-gradient(top, ' + 
			'rgba(' + Math.round(Math.random()*255)+','+Math.round(Math.random()*255)+','+Math.round(Math.random()*255)+',0.5), ' +
			'rgba(' + Math.round(Math.random()*255)+','+Math.round(Math.random()*255)+','+Math.round(Math.random()*255)+',0.5) )';
		  
          frames[i].style['backgroundImage'] = '-webkit-linear-gradient(top, ' + 
			'rgba(' + Math.round(Math.random()*255)+','+Math.round(Math.random()*255)+','+Math.round(Math.random()*255)+',0.5), ' +
			'rgba(' + Math.round(Math.random()*255)+','+Math.round(Math.random()*255)+','+Math.round(Math.random()*255)+',0.5) )';
		  
          frames[i].style['backgroundImage'] = '-moz-linear-gradient(top, ' + 
			'rgba(' + Math.round(Math.random()*255)+','+Math.round(Math.random()*255)+','+Math.round(Math.random()*255)+',0.5), ' +
			'rgba(' + Math.round(Math.random()*255)+','+Math.round(Math.random()*255)+','+Math.round(Math.random()*255)+',0.5) )';
			
          frames[i].style['backgroundColor'] = 'rgb('+ Math.round(Math.random()*255)+','+Math.round(Math.random()*255)+','+Math.round(Math.random()*255)+')';
		  
        }
      }
      
      function stopAnimation(){
        clearInterval(timer);
		
      }
      
    </script>
  </head>
  <body>
    <script>
      AnimatedFramesTest.run("Frame [linear-gradient]",
                             ['csstransitions','cssgradients','rgba'],
                             startAnimation,
                             stopAnimation);
    </script>
  </body>
</html>
